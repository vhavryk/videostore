Video Store Backend
===================

CRUD operations were generated by jhipster

#### UML Diagram

![alt text](diagram.png)

#### Run app :
 
     gradle bootRun
     
  and access
  
    http://localhost:8080/swagger-ui.html#/


#### Implemented logic for taking/returning movies

##### POST /api/orders/calculate 

Calculate price per movie with input json :

    {
      "customerId": 1,
      "rentMovies": [
        {
          "days": 5,
          "movieId": 2
        }
      ],
      "useCustomerBonus": true
    }

output with calculated movie's & total prices :

    {
      "customerId": 1,
      "bonus": 5,
      "rentMovies": [
        {
          "name": "Spider Man",
          "movieTypeName": "Regular rental",
          "moviePrice": 30,
          "moviePriceName": "Basic",
          "days": 5,
          "movieId": 2,
          "bonus": 1
        }
      ],
      "sumPrices": 60,
      "useCustomerBonus": true,
      "total": 55
    }

#### POST /api/orders/place 

Place order & save rent movies to databases with input json :

    {
      "customerId": 1,
      "rentMovies": [
        {
          "days": 5,
          "movieId": 2
        }
      ],
      "useCustomerBonus": true
    }
    
output json :

    {
      "calculatedResult": {
        "customerId": 1,
        "bonus": 5,
        "rentMovies": [
          {
            "name": "Spider Man",
            "movieTypeName": "Regular rental",
            "moviePrice": 30,
            "moviePriceName": "Basic",
            "days": 5,
            "movieId": 2,
            "bonus": 1
          }
        ],
        "sumPrices": 60,
        "useCustomerBonus": true,
        "total": 55
      },
      "rents": [
        {
          "id": 2,
          "date": "2020-10-25",
          "paid": true,
          "days": 5,
          "returnedDate": null,
          "returnedPaid": null,
          "returned": null,
          "customerId": 1,
          "movieId": 2,
          "orderId": 2,
          "price": null,
          "returnPrice": null
        }
      ],
      "order": {
        "id": 2,
        "localDate": "2020-10-25",
        "rents": []
      }
    }


#### POST /api/orders/return/calculate

Calculates return price for list of movies :

    {
      "customerId": 1,
      "movieIds": [
        2
      ],
      "useCustomerBonus": false
    }
    
Output is calculated return price for movies :

    {
      "customerId": 1,
      "bonus": 0,
      "rentMovies": [
        {
          "name": "Spider Man",
          "movieTypeName": "Regular rental",
          "moviePrice": 30,
          "moviePriceName": "Basic",
          "days": 0,
          "movieId": 2,
          "bonus": 1
        }
      ],
      "sumPrices": 0,
      "useCustomerBonus": false,
      "total": 0
    }    

#### POST /api/orders/return/accept

Accept returning movies & save data to database  :

    {
      "customerId": 1,
      "movieIds": [
        2
      ],
      "useCustomerBonus": false
    }
    
Output :

    {
      "calculatedResult": {
        "customerId": 1,
        "bonus": 0,
        "rentMovies": [
          {
            "name": "Spider Man",
            "movieTypeName": "Regular rental",
            "moviePrice": 30,
            "moviePriceName": "Basic",
            "days": 0,
            "movieId": 2,
            "bonus": 1
          }
        ],
        "sumPrices": 0,
        "useCustomerBonus": false,
        "total": 0
      }
    }

    




    
 
    

